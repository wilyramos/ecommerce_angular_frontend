<header class="fixed top-0 left-0 right-0 z-50 bg-white border-b">
  <!-- PRIMER HEADER: ROOTS -->
  <div>
    <nav class="container mx-auto px-4 sm:px-6 lg:px-8 h-14 flex items-center justify-between relative">
      <!-- IZQUIERDA: ROOT CATEGORIES -->
      <div class="w-1/3">
        <nav class="h-12 flex items-center space-x-6 overflow-x-auto">
          @for (cat of categoriesRoot; track cat._id) {
          <button (click)="selectCategory(cat)"
            class="text-gray-600 hover:text-black whitespace-nowrap relative transition"
            [class.text-black]="selectedCategory?._id === cat._id">
            {{ cat.name }}
            @if (selectedCategory?._id === cat._id) {
            <span class="absolute bottom-0 left-0 right-0 h-[2px] bg-black rounded-t"></span>
            }
          </button>
          }
        </nav>
      </div>

      <!-- CENTRO: LOGO -->
      <div class="w-1/3 flex justify-center">
        <a routerLink="/" class="text-2xl font-bold tracking-wide text-gray-900 select-none">
          BALENCIAGA
        </a>
      </div>

      <!-- DERECHA: ICONOS -->
      <div class="w-1/3 flex justify-end space-x-4">
        <button mat-icon-button aria-label="Buscar">
          <mat-icon fontSet="material-icons-outlined" class="text-black">search</mat-icon>
        </button>

        <button mat-icon-button aria-label="Favoritos">
          <mat-icon fontSet="material-icons-outlined" class="text-2xl text-indigo-600 font-bold"
            [matBadge]="favoritesItemCount">
            favorite_border
          </mat-icon>
        </button>

        <button mat-icon-button aria-label="Cuenta de usuario" (click)="openAuthDialog()">
          <mat-icon fontSet="material-icons-outlined" class="text-black">person_outline</mat-icon>
        </button>

        <button mat-icon-button (click)="openCartSheet()" aria-label="Bolsa de compras">
          <mat-icon fontSet="material-icons-outlined" [matBadge]="cartItemCount" matBadgeColor="warn">
            local_mall
          </mat-icon>
        </button>
      </div>
    </nav>
  </div>

  <!-- SEGUNDO HEADER: SUBCATEGORÍAS DEL ROOT -->
  <!-- SEGUNDO HEADER: SUBCATEGORÍAS -->
  <!-- SEGUNDO HEADER: SUBCATEGORÍAS DEL ROOT -->
  @if (selectedCategory?.children?.length) {
  <div class="absolute left-0 right-0 bg-white border-t border-gray-200 z-40">
    <nav class="max-w-none w-full px-8 h-10 flex items-center space-x-6">
      @for (sub of selectedCategory.children; track sub._id) {
      <div class="relative group">
        <!-- Nivel 2 -->
        <a [routerLink]="['/products/category', sub.slug]"
          class="text-gray-600 hover:text-black whitespace-nowrap transition-colors duration-150">
          {{ sub.name }}
        </a>

        <!-- Nivel 3: aparece solo al hacer hover sobre la subcategoría -->
        @if (sub.children?.length) {
        <div
          class="absolute left-0 top-full mt-2 hidden group-hover:block bg-white border border-gray-200 shadow-md rounded-md min-w-[200px] z-50">
          <ul class="py-2">
            @for (child3 of sub.children; track child3._id) {
            <li>
              <a [routerLink]="['/products/category', child3.slug]"
                class="block px-4 py-2 text-gray-600 hover:bg-gray-100 hover:text-black whitespace-nowrap">
                {{ child3.name }}
              </a>
            </li>
            }
          </ul>
        </div>
        }
      </div>
      }
    </nav>
  </div>
  }

</header>

<!-- CONTENIDO -->
<main class="pt-[64px] sm:pt-[64px] lg:pt-[64px]"></main>
