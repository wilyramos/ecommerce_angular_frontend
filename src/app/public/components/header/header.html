<header class="fixed top-0 left-0 right-0 z-50 bg-white shadow-sm">
  <!-- PRIMER HEADER -->
  <div class="border-b">
    <nav class="container mx-auto px-4 sm:px-6 lg:px-8 h-14 flex items-center justify-between relative">
      <!-- IZQUIERDA: MENÚ -->
      <div class="w-1/3 flex items-center">
        <button mat-icon-button aria-label="Menú de navegación">
          <mat-icon fontSet="material-icons-outlined" class="text-black">menu</mat-icon>
        </button>
      </div>

      <!-- CENTRO: LOGO -->
      <div class="absolute left-1/2 transform -translate-x-1/2">
        <a routerLink="/" class="text-2xl font-bold tracking-wide text-gray-900 select-none">
          BALENCIAGA
        </a>
      </div>

      <!-- DERECHA: ICONOS -->
      <div class="w-1/3 flex items-center justify-end space-x-2">
        <button mat-icon-button aria-label="Buscar">
          <mat-icon fontSet="material-icons-outlined" class="text-black">search</mat-icon>
        </button>

        <button mat-icon-button aria-label="Favoritos">
          <mat-icon
            fontSet="material-icons-outlined"
            class="text-2xl text-indigo-600 font-bold"
            [matBadge]="favoritesItemCount"
          >
            favorite_border
          </mat-icon>
        </button>

        <button mat-icon-button aria-label="Cuenta de usuario" (click)="openAuthDialog()">
          <mat-icon fontSet="material-icons-outlined" class="text-black">person_outline</mat-icon>
        </button>

        <button mat-icon-button (click)="openCartSheet()" aria-label="Bolsa de compras">
          <mat-icon fontSet="material-icons-outlined" [matBadge]="cartItemCount" matBadgeColor="warn">
            local_mall
          </mat-icon>
        </button>
      </div>
    </nav>
  </div>

  <!-- SEGUNDO HEADER: CATEGORÍAS ROOT -->
  <div class="border-b">
    <nav class="container mx-auto px-4 sm:px-6 lg:px-8 h-12 flex items-center space-x-6 overflow-x-auto">
      @for (cat of categoriesRoot; track cat._id) {
        <button
          (click)="selectCategory(cat)"
          class="text-gray-700 hover:text-black whitespace-nowrap font-medium relative"
          [class.text-black]="selectedCategory?._id === cat._id"
        >
          {{ cat.name }}
          @if (selectedCategory?._id === cat._id) {
            <span class="absolute bottom-0 left-0 right-0 h-[2px] bg-black rounded-t"></span>
          }
        </button>
      }
    </nav>
  </div>

  <!-- TERCER HEADER: SUBCATEGORÍAS (solo si hay una root seleccionada) -->
  @if (selectedCategory?.children?.length) {
    <div class="bg-gray-50 border-b">
      <nav class="container mx-auto px-4 sm:px-6 lg:px-8 h-10 flex items-center space-x-4 overflow-x-auto">
        @for (sub of selectedCategory.children; track sub._id) {
          <a
            [routerLink]="['/products/category', sub.slug]"
            class="text-gray-600 hover:text-black whitespace-nowrap"
          >
            {{ sub.name }}
          </a>
        }
      </nav>
    </div>
  }
</header>

<!-- CONTENIDO DE LA PÁGINA -->
<main class="pt-[64px] sm:pt-[64px] lg:pt-[64px]"></main>
