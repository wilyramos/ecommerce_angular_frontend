<mat-drawer-container >
  <!-- Drawer lateral de filtros -->
  <mat-drawer #filterDrawer mode="over" position="start" class="w-80 shadow-xl">
    <app-filter-sheet (close)="closeFilterDrawer()"></app-filter-sheet>
  </mat-drawer>

  <!-- Contenido principal -->
  <mat-drawer-content>
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8  bg-white">
      <div class="flex items-center justify-between  border-b border-gray-300 gap-2 bg-white  ">

        <!-- Botón de filtros (Móvil) -->
        <button (click)="openFilterDrawer()"
          class="inline-flex items-center gap-2 px-3 py-1.5 border-2 border-black  rounded-md hover:bg-gray-100 transition text-sm cursor-pointer">
          <span>Filtros</span>
        </button>

        <!-- Filtros inline (Solo Desktop)-->
        <div class="hidden sm:flex flex-1">
          <app-category-filters (openFilterDrawer)="openFilterDrawer()"></app-category-filters>
        </div>

        <!-- Ordenamiento -->
        <app-sort-control [currentSort]="sort" (sortChange)="onSortChange($event)"></app-sort-control>
      </div>


      @if (isLoading && products.length === 0) {
      <div class="text-center py-20 text-gray-500">
        Cargando productos...
      </div>
      } @else {
      @if (error) {
      <div class="text-center text-red-600 py-20">
        {{ error }}
      </div>
      } @else {
      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6 mt-8">
        @for (product of products; track product._id) {
        <app-product-card [product]="product"></app-product-card>
        }
      </div>

      <div class="mt-10">
        <app-paginator [page]="page" [totalPages]="totalPages" (pageChange)="onPageChange($event)"></app-paginator>
      </div>
      }
      }
    </div>
  </mat-drawer-content>
</mat-drawer-container>
