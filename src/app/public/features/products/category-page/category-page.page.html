<div class="min-h-screen py-10 px-4 max-w-6xl mx-auto">
  @if (isLoading && products.length === 0) { <!-- Mejoramos la condición de carga -->
    <div class="text-center py-20 text-gray-500">
      Cargando productos...
    </div>
  } @else {
    @if (error) {
      <div class="text-center text-red-600 py-10">
        {{ error }}
      </div>
    } @else {
      <!-- Columna del Sidebar -->
        <div class="w-full md:w-64 mb-6 md:mb-0">
          <app-filter-sidebar
            [filters]="filters"
            (filtersChange)="onFiltersChange($event)">
          </app-filter-sidebar>
        </div>

      <!-- Contenedor principal para Sidebar y Contenido -->
      <div class="flex flex-col md:flex-row md:gap-8">
        <!-- Columna de Productos -->
        <div class="flex-1">
          @if (products.length > 0) {


            <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4">
              @for (product of products; track product._id) {
                <app-product-card [product]="product" />
              }
            </div>
          } @else {
            <div class="text-center text-gray-400 py-20">
              No hay productos en esta categoría.
            </div>
          }
        </div>

      </div> <!-- Fin del contenedor flex -->

    }
  }

  <!-- Paginación fuera del contenedor flex principal -->
  @if (totalPages > 1 && !isLoading) {
    <div class="flex justify-center mt-10">
      <app-paginator
        [page]="page"
        [totalPages]="totalPages"
        (pageChange)="onPageChange($event)">
      </app-paginator>
    </div>
  }
</div>
